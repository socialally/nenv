Table of Contents
=================

* [nenv](#nenv)
  * [Install](#install)
  * [Usage](#usage)
    * [env([value])](#envvalue)
    * [env.value](#envvalue)
    * [env.get()](#envget)
    * [env.set(val)](#envsetval)
    * [env.defaults](#envdefaults)
    * [Environments](#environments)
  * [Example](#example)
  * [Developer](#developer)
    * [Test](#test)
    * [Readme](#readme)
  * [License](#license)

nenv
====

Utility for mananging node development environments.

Requires [node](http://nodejs.org) and [npm](http://www.npmjs.org).

## Install

```
npm i nenv --save
```

## Usage

```javascript
function nenv([environments, get, set])
```

```javascript
var env = require('nenv')();
if(!env()) {
  // do something when the environment is invalid
}else if(env.test) {
  // do something for test environment
}
```

* `environments`: Array or object of custom environments, if not specified the `defaults` are used.
* `get`: A custom function for getting the environment value (optional).
* `set`: A custom function for setting the environment value (optional).

### env([value])

Determines if an environment value is valid. Returns `false` is the supplied value is invalid or the string key for the environment if valid.

If no value is supplied then `env.value` is used which allows testing whether the default value is valid by calling with no arguments.

### env.value

The value returned from `get()` when `nenv()` was called, the initial environment value.

### env.get()

Get the *current* value of the environment, the default implementation returns `process.env.NODE_ENV`.

### env.set(val)

Set the *current* value of the environment, the default implementation returns `false` if the supplied value is not a known environment alias otherwise a function that may be called to revert to the *previous* value.

### env.defaults

Default values to use.

```javascript
['test', 'devel', 'stage', 'production'];
```

### Environments

Pass an object or array to define your available environments:

```javascript
var nenv = require('nenv')
  , env = nenv({production: ['production', 'pro'], dev: 'dev', test: 'test'});
console.log(env.keys);
```

## Example

```javascript
var nenv = require('./')
  , env = nenv();

// environment value fixed at creation time
console.log(env.value);

// get current value of environment
console.log(env.get());

// check environment is valid
console.log(env(env.TEST));
console.log(env(env.DEVEL));
console.log(env(env.STAGE));
console.log(env(env.PRODUCTION));
console.log(env('unknown'));

// set current value
var revert = env.set(env.DEVEL);
console.log(env.get());           // devel
revert();
console.log(env.get());           // reverted to previous value
```

Run with:

```
NODE_ENV=stage node example.js
```

## Developer

### Test

Run the test specifications:

```
npm test
```

### Readme

Generate the project readme file (requires [mdp](https://github.com/freeformsystems/mdp)):

```
npm run readme
```

## License

Everything is [MIT](http://en.wikipedia.org/wiki/MIT_License). Read the [license](https://github.com/socialally/nenv/blob/master/LICENSE) if you feel inclined.

Generated by [mdp(1)](https://github.com/freeformsystems/mdp).

[node]: http://nodejs.org
[npm]: http://www.npmjs.org
[mdp]: https://github.com/freeformsystems/mdp
